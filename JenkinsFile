pipeline {
	agent any
	environment {
        GITHUB_CREDENTIALS = credentials('github-credentials-id')  // Usa el ID de la credencial
    }
	stages {		

        stage('Fusionar a Pruebas'){
             when {
                branch 'Pruebas'
            }
            steps{
                echo "Fusionando desarrollo a pruebas"
            	sh '''
				    chmod +x /var/lib/jenkins/workspace/Proyecto-IngSof_Pruebas/scripts/BranchPruebas.sh
                	/var/lib/jenkins/workspace/Proyecto-IngSof_Pruebas/scripts/BranchPruebas.sh
            	'''
            }
        }
        stage('Desplegar en pruebas') {
			 when {
                branch 'Pruebas'
            }
        	steps {
            	echo "Desplegando en servidor de pruebas"
            	sh '''
                	chmod +x /var/lib/jenkins/workspace/Proyecto-IngSof_Pruebas/scripts/DesplieguePruebas.sh
                	/var/lib/jenkins/workspace/Proyecto-IngSof_Pruebas/scripts/DesplieguePruebas.sh
            	'''
        	}
    	}
		stage('Sincronizacion a Produccion') {
			steps {
				echo "Sincronizando los cambios a producci√≥n..."
                sh '''
                    chmod +x /var/lib/jenkins/workspace/Proyecto-IngSof_Pruebas/scripts/PruebasaProduccion.sh
                    /var/lib/jenkins/workspace/Proyecto-IngSof_Pruebas/scripts/PruebasaProduccion.sh
                '''
                    
                }

				}
			
    }

    }
    	
  }